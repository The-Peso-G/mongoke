(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{r7sd:function(e,n,t){"use strict";t.r(n),t.d(n,"_frontmatter",(function(){return i})),t.d(n,"default",(function(){return l}));t("91GP"),t("rGqo"),t("yt8O"),t("Btvt"),t("RW0V"),t("FlsD"),t("q1tI");var o=t("E/Ix"),a=t("hhGP");t("qKvR");function r(){return(r=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e}).apply(this,arguments)}var i={};void 0!==i&&i&&i===Object(i)&&Object.isExtensible(i)&&!i.hasOwnProperty("__filemeta")&&Object.defineProperty(i,"__filemeta",{configurable:!0,value:{name:"_frontmatter",filename:"src/docs/main.md"}});var s={_frontmatter:i},c=a.a;function l(e){var n=e.components,t=function(e,n){if(null==e)return{};var t,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)t=r[o],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,["components"]);return Object(o.b)(c,r({},s,t,{components:n,mdxType:"MDXLayout"}),Object(o.b)("h1",{id:"introduction"},"Introduction"),Object(o.b)("p",null,"Mongoke generates a graphql server based on a configuration file that describes the shape of the database via graphql types and their corresponding collections."),Object(o.b)("p",null,"Every type defined in the schema must be associated with a collection to be accessible via graphql, every type has a configuration to specify its collection and optionally authorization guards."),Object(o.b)("h1",{id:"using-docker-compose"},"Using Docker Compose"),Object(o.b)("p",null,"The fastest way to try Mongoke is via docker-compose."),Object(o.b)("h3",{id:"1-write-the-configuration-to-describe-the-database-schema-and-relations"},"1. Write the configuration to describe the database schema and relations"),Object(o.b)("p",null,"The ObjectId scalar is already defined by default, it is converted to string when sent as json"),Object(o.b)("pre",null,Object(o.b)("code",r({parentName:"pre"},{className:"language-yml"}),"# ./mongoke.yml\nschema: |\n    type User {\n        _id: ObjectId\n        username: String\n        email: String\n    }\n    type BlogPost {\n        _id: ObjectId\n        author_id: ObjectId\n        title: String\n        content: String\n    }\n\ntypes:\n    User:\n        collection: users\n    BlogPost:\n        collection: posts\n\nrelations:\n    - field: posts\n      from: User\n      to: BlogPost\n      relation_type: to_many\n      where:\n          author_id: ${{ parent['_id'] }}\n")),Object(o.b)("h3",{id:"2-run-the-mongoke-image-with-the-above-configuration"},"2. Run the ",Object(o.b)("inlineCode",{parentName:"h3"},"mongoke")," image with the above configuration"),Object(o.b)("p",null,"To start the container mount copy paste the following content in a ",Object(o.b)("inlineCode",{parentName:"p"},"docker-compose.yml")," file, then execute ",Object(o.b)("inlineCode",{parentName:"p"},"docker-compose up"),"."),Object(o.b)("pre",null,Object(o.b)("code",r({parentName:"pre"},{className:"language-yml"}),"# docker-compose.yml\nversion: '3'\n\nservices:\n    mongoke:\n        ports:\n            - 4000:80\n        image: mongoke/mongoke\n        environment:\n            DB_URL: mongodb://mongo/db\n        volumes:\n            - ./mongoke.yml:/conf.yml\n    mongo:\n        image: mongo\n        logging:\n            driver: none\n")),Object(o.b)("h3",{id:"3-query-the-generated-service-via-graphql-or-go-to-httplocalhost4000graphiql-to-open-graphiql"},"3. Query the generated service via graphql or go to ",Object(o.b)("a",r({parentName:"h3"},{href:"http://localhost:4000/graphiql"}),"http://localhost:4000/graphiql")," to open graphiql"),Object(o.b)("pre",null,Object(o.b)("code",r({parentName:"pre"},{className:"language-graphql"}),'{\n    user(where: { username: { eq: "Mike" } }) {\n        _id\n        username\n        email\n        posts {\n            nodes {\n                title\n            }\n        }\n    }\n\n    blogPosts(first: 10, after: "Post 1", cursorField: title) {\n        nodes {\n            title\n            content\n        }\n        pageInfo {\n            endCursor\n            hasNextPage\n        }\n    }\n}\n')))}l&&l===Object(l)&&Object.isExtensible(l)&&!l.hasOwnProperty("__filemeta")&&Object.defineProperty(l,"__filemeta",{configurable:!0,value:{name:"MDXContent",filename:"src/docs/main.md"}}),l.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-docs-main-md-e332aef840bf45de5f3b.js.map